{"version":3,"file":"/lib/nav-route.coffee.js","sources":["nav-route.coffee"],"names":[],"mappings":"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","sourcesContent":["DEFAULT_MAIN_LAYOUT = 'mainLayout'\n\nclass NavRoute\n  constructor: (@name, @icon, @config) ->\n    unless @name?\n      throw new Error('Must provide a name for each NavRoute')\n    unless @config?\n      @config = {}\n    {@template, @isMainNav, @label, @path, @parentName, @layoutTemplate, @redirect} = @config\n    unless @template?\n      @template = @name\n    unless @isMainNav?\n      @isMainNav = true\n    unless @label?\n      if @redirect?\n        @label = @redirect.substr(0, 1).toUpperCase() + @redirect.substr(1)\n      else\n        @label = @name.substr(0, 1).toUpperCase() + @name.substr(1)\n    unless @path?\n      @path = '/' + @name\n    unless @icon?\n      @icon = null\n    unless @layoutTemplate?\n      @layoutTemplate = DEFAULT_MAIN_LAYOUT\n\nclass NavRouteList\n  constructor: (navRoutes) ->\n    @routes = []\n    @routeIndex = {}\n    @rootNavRoutes = []\n    @redirects = []\n    for route in navRoutes\n      @addRoute(route)\n    @setRouter()\n\n  addRoute: (route) ->\n    if @routeIndex.hasOwnProperty(route.name)\n      throw new Error('Route names must be unique')\n    if route.parentName? and not route.isMainNav\n      throw new Error('Children nav nodes must set isMainNav to true.')\n    unless route.children?\n      route.children = []\n    if route.parentName?\n      parentRoute = @getRoute(route.parentName)\n      unless parentRoute.isMainNav\n        throw new Error('Parent nav nodes must set isMainNav to true.')\n      route.path = parentRoute.path + route.path\n      parentRoute.children.push(route)\n    else\n      if route.isMainNav\n        @rootNavRoutes.push(route)\n    @routes.push(route)\n    @routeIndex[route.name] = route\n\n  getRoute: (name) ->\n    return @routeIndex[name]\n\n  setRouter: (layoutTemplate = DEFAULT_MAIN_LAYOUT, redirectTemplate = 'loading', notFoundTemplate = '404') ->\n    Router.configure({layoutTemplate, notFoundTemplate})\n    # set regular routes\n    for r in @routes\n      if r.redirect?\n        Router.route(r.path, () ->\n          this.redirect(r.redirect);\n        )\n      else\n        Router.route(r.name, r)\n    Router.onAfterAction(() ->\n      Session.set('active', @route.getName())\n    )\n\nthis.NavRoute = NavRoute\nthis.NavRouteList = NavRouteList"]}